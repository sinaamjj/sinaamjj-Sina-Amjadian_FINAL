+# سامانه تورینو – پلتفرم رزرو تور گردشگری



+این مخزن شامل یک برنامهٔ فول‌استک برای مدیریت و فروش تورهای گردشگری است که از **Next.js** برای لایهٔ فرانت‌اند و **Express.js** برای لایهٔ بک‌اند استفاده می‌کند. داده‌ها به‌صورت فایل‌های JSON نگهداری می‌شوند تا امکان اجرای سریع و بدون وابستگی به پایگاه‌دادهٔ خارجی فراهم شود. رابط کاربری فارسی پروژه شامل صفحات خانگی، جزئیات تور، رزرو، احراز هویت با رمز یک‌بارمصرف و پنل کاربری است، در حالی‌که API بک‌اند ثبت سفارش، مدیریت سبد و کاربران را پوشش می‌دهد.


## ساختار مخزن



```

├── Back/                # سرویس بک‌اند Express (API + Swagger)
│   ├── app.js           # مقداردهی اولیهٔ برنامه، CORS، Swagger و مسیردهی
│   ├── controllers/     # منطق دامنه (تور، کاربر، سبد، سفارش، احراز هویت)

│   ├── models/          # لایهٔ دسترسی به داده روی فایل‌های JSON

│   ├── routes/          # تعریف مسیرهای REST و Dev utilities

│   ├── DB/              # دادهٔ نمونهٔ تورها، سفارش‌ها و کاربران

│   └── utils/           # ابزارهایی مثل مدیریت فایل

├── Front/               # برنامهٔ Next.js با رابط کاربری فارسی

│   ├── pages/           # صفحات SSG/SSR (خانه، تورها، رزرو، پروفایل و ...)

│   ├── components/      # اجزای UI شامل فرم‌ها، کارت تور، احراز هویت OTP

│   └── utils/api.js     # کلاینت Axios با اینترسپتور برای JWT

└── package-lock.json    # قفل وابستگی ریشه (مدیریت هم‌زمان فرانت و بک)
+## پیش‌نیازها

- Node.js نسخهٔ 18 یا جدیدتر
- npm یا Yarn

   ```bash
   cd Back
   npm install
+   ```
+2. فایل `.env` ایجاد کرده و تنظیمات زیر را وارد کنید:

   ```env
  PORT=6500           # پورتی که فرانت‌اند انتظار دارد

   JWT_SECRET=your_strong_secret

+   ```
+3. اجرای محیط توسعه:
+   ```bash

+   npm run dev

+   ```

+   سرویس روی `http://localhost:6500` در دسترس خواهد بود و مستندات Swagger در `http://localhost:6500/api-docs` قرار می‌گیرد.

+4. در صورت نیاز به ریست داده‌های نمونه، درخواست GET به `http://localhost:6500/truncate` ارسال کنید.

+

+## راه‌اندازی فرانت‌اند

+1. در پوشهٔ Front وابستگی‌ها را نصب کنید:

+   ```bash

+   cd Front

+   npm install

+   ```

+2. محیط توسعه را اجرا کنید:

+   ```bash

+   npm run dev

+   ```

+   برنامه روی `http://localhost:3000` اجرا می‌شود و برای فراخوانی API از نشانی `http://localhost:6500` استفاده می‌کند. در صورت تغییر پورت سرور، مقدار `baseURL` در فایل `Front/utils/api.js` را به‌روزرسانی کنید. 【F:Front/utils/api.js†L1-L23】

+

+## مسیرهای API مهم

+

+| مسیر | متد | توضیح | نیاز به احراز هویت |

+|------|-----|-------|---------------------|

+| `/auth/send-otp` | POST | ارسال کد یک‌بارمصرف به شمارهٔ موبایل | خیر |

+| `/auth/check-otp` | POST | اعتبارسنجی کد و صدور توکن‌های JWT | خیر |

+| `/auth/refresh-token` | POST | دریافت توکن دسترسی جدید با استفاده از رفرش توکن | خیر |

+| `/tour` | GET | فهرست تورها با فیلترهای اختیاری مقصد، مبدا و تاریخ | خیر |

+| `/tour/:tourId` | GET | دریافت جزئیات یک تور | خیر |

+| `/basket` | GET | مشاهدهٔ سبد خرید فعلی | بله (Bearer Token) |

+| `/basket/:tourId` | PUT | افزودن تور به سبد خرید | بله |

+| `/order` | POST | ثبت سفارش و ایجاد تراکنش | بله |

+| `/user/profile` | GET/PUT | مشاهده و بروزرسانی پروفایل کاربر | بله |

+| `/user/tours` | GET | فهرست تورهای خریداری‌شده کاربر | بله |

+| `/user/transactions` | GET | تاریخچهٔ تراکنش‌های مالی کاربر | بله |

+| `/truncate` | GET | ریست داده‌های نمونهٔ سیستم (محیط توسعه) | خیر (استفادهٔ توسعه‌ای) |

+

+> تمام مسیرهای محافظت‌شده باید هدر `Authorization: Bearer <token>` را دریافت کنند که توسط فرانت‌اند بعد از ورود OTP ذخیره و ارسال می‌شود. 

+

+## وابستگی‌های شاخص

+- **بک‌اند**: `express`, `jsonwebtoken`, `mongoose` (برای آینده/قابلیت توسعه)، `swagger-ui-express`, `dotenv`, `cors`, `uuid`. 【F:Back/package.json†L1-L24】

+- **فرانت‌اند**: `next`, `react`, `formik`, `yup`, `axios`, `react-toastify`, `react-multi-date-picker`, `react18-input-otp`, `moment-jalaali`, `swiper`. 【F:Front/package.json†L1-L28】

+

+## نکات توسعه و نگهداری

+- داده‌ها در پوشهٔ `Back/DB` ذخیره می‌شوند؛ هنگام استقرار تولید بهتر است به پایگاه‌دادهٔ پایدار (مانند MongoDB) مهاجرت شود. 

+- پیکربندی CORS، سرو فایل‌های استاتیک و Swagger در فایل `Back/app.js` انجام می‌شود؛ برای استقرار می‌توان دامنهٔ مجاز و مسیر مستندات را شخصی‌سازی کرد. 

+- فرانت‌اند برای مدیریت توکن از LocalStorage استفاده می‌کند؛ در مرورگرهای اشتراکی، حتماً به خروج کاربر توجه کنید یا ذخیره‌سازی امن‌تری در نظر بگیرید. 

+- صفحات حساس (پروفایل، تورهای من، تراکنش‌ها و رزرو) با دریافت خطاهای 401/403 کاربر را به صفحهٔ ورود هدایت می‌کنند.

+

+---

+

+با اجرای مراحل بالا، سامانهٔ تورینو آمادهٔ استفاده است و می‌توانید آن را برای توسعهٔ امکانات جدید یا اتصال به سرویس‌های واقعی پرداخت و پیامکی گسترش دهید.
