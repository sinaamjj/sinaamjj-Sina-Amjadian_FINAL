# 🏔️ تورینو | پلتفرم رزرو تور گردشگری

<div align="center">

![Torino Logo](https://img.shields.io/badge/Torino-Travel%20Platform-blue?style=for-the-badge)
![Next.js](https://img.shields.io/badge/Next.js-14-black?style=for-the-badge&logo=next.js)
![Express](https://img.shields.io/badge/Express-4.x-green?style=for-the-badge&logo=express)
![React](https://img.shields.io/badge/React-18.x-blue?style=for-the-badge&logo=react)


</div>

---

## 📖 درباره پروژه

تورینو یک **سامانه فول‌استک** برای رزرو و مدیریت تورهای گردشگری است که در بوت‌کمپ **بوتواستارت** توسعه داده شده. این پلتفرم به کاربران امکان می‌دهد:

- 🔍 **جستجوی هوشمند** تورها با فیلترهای پیشرفته (مبدا، مقصد، تاریخ)
- 🎫 **رزرو آنلاین** تورها با سیستم سبد خرید
- 🔐 **احراز هویت امن** با رمز یکبارمصرف (OTP)
- 👤 **پنل کاربری** شخصی برای مدیریت تورها و تراکنش‌ها
- 📱 **رابط کاربری ریسپانسیو** با پشتیبانی کامل زبان فارسی

این پروژه یک نمونه کامل از معماری مدرن وب است که شامل **فرانت‌اند React-based** و **بک‌اند RESTful API** می‌شود.

---

## ⚡ فناوری‌ها و ابزارها

### 🎨 فرانت‌اند
```
- Next.js 14         → فریم‌ورک React با قابلیت SSR/SSG
- React 18           → کتابخانه اصلی UI
- Formik + Yup       → مدیریت فرم‌ها و اعتبارسنجی
- Axios              → مدیریت درخواست‌های HTTP
- React Toastify     → نمایش نوتیفیکیشن‌ها
- Swiper             → اسلایدر تصاویر تور
- Moment Jalaali     → مدیریت تاریخ شمسی
- React Multi Date Picker → انتخاب تاریخ فارسی
```

### ⚙️ بک‌اند
```
- Express.js         → فریم‌ورک Node.js برای API
- JSON Web Token     → مدیریت احراز هویت
- Swagger UI         → مستندسازی خودکار API
- UUID               → تولید شناسه یکتا
- CORS               → مدیریت درخواست‌های Cross-Origin
- dotenv             → مدیریت متغیرهای محیطی
```

### 📦 ذخیره‌سازی داده
```
- JSON Files         → ذخیره‌سازی داده برای توسعه سریع
- File System        → مدیریت فایل‌های داده
- (آماده مهاجرت به MongoDB)
```

---

## 📁 ساختار پروژه

```
sinaamjj-Sina-Amjadian_FINAL/
│
├── 📂 Back/                    # سرویس بک‌اند Express
│   ├── app.js                  # تنظیمات اولیه و Middleware
│   ├── 📂 controllers/         # منطق کسب‌وکار
│   │   ├── authController.js   # احراز هویت OTP
│   │   ├── tourController.js   # مدیریت تورها
│   │   ├── basketController.js # سبد خرید
│   │   ├── orderController.js  # ثبت سفارش
│   │   └── userController.js   # پروفایل کاربر
│   │
│   ├── 📂 models/              # لایه دسترسی به داده
│   │   ├── tourModel.js
│   │   ├── userModel.js
│   │   └── orderModel.js
│   │
│   ├── 📂 routes/              # مسیریابی API
│   │   ├── authRoutes.js
│   │   ├── tourRoutes.js
│   │   ├── basketRoutes.js
│   │   └── userRoutes.js
│   │
│   ├── 📂 DB/                  # داده‌های نمونه JSON
│   │   ├── tours.json          # لیست تورها
│   │   ├── users.json          # کاربران
│   │   └── orders.json         # سفارشات
│   │
│   └── 📂 utils/               # توابع کمکی
│       └── fileHandler.js      # خواندن/نوشتن فایل
│
├── 📂 Front/                   # اپلیکیشن Next.js
│   ├── 📂 pages/               # صفحات و روت‌ها
│   │   ├── index.js            # صفحه اصلی
│   │   ├── tours/              # لیست و جزئیات تورها
│   │   ├── booking/            # فرآیند رزرو
│   │   ├── profile/            # پنل کاربری
│   │   └── auth/               # ورود و احراز هویت
│   │
│   ├── 📂 components/          # کامپوننت‌های قابل استفاده مجدد
│   │   ├── TourCard.js         # کارت نمایش تور
│   │   ├── OTPInput.js         # ورودی رمز یکبارمصرف
│   │   ├── Header.js           # هدر سایت
│   │   └── Footer.js           # فوتر سایت
│   │
│   ├── 📂 utils/
│   │   └── api.js              # کلاینت Axios با Interceptor
│   │
│   └── 📂 public/              # فایل‌های استاتیک
│       └── images/             # تصاویر تورها
│
└── package.json                # وابستگی‌های ریشه پروژه
```

---

## 🚀 نصب و راه‌اندازی

### پیش‌نیازها
قبل از شروع، اطمینان حاصل کنید که موارد زیر روی سیستم شما نصب است:

- **Node.js** نسخه 18 یا بالاتر
- **npm** یا **yarn**
- **Git**

### 1️⃣ کلون کردن پروژه

```bash
git clone https://github.com/sinaamjj/sinaamjj-Sina-Amjadian_FINAL.git
cd sinaamjj-Sina-Amjadian_FINAL
```

### 2️⃣ راه‌اندازی بک‌اند

```bash
# ورود به پوشه بک‌اند
cd Back

# نصب وابستگی‌ها
npm install

# ساخت فایل .env
touch .env
```

**محتوای فایل `.env`:**
```env
PORT=6500
JWT_SECRET=your_super_secret_key_here_min_32_characters
NODE_ENV=development
```

**اجرای سرور:**
```bash
# حالت توسعه (با hot reload)
npm run dev

# حالت پروداکشن
npm start
```

✅ سرور روی `http://localhost:6500` اجرا می‌شود  
📚 مستندات Swagger در `http://localhost:6500/api-docs` قابل دسترسی است

### 3️⃣ راه‌اندازی فرانت‌اند

**در ترمینال جدید:**

```bash
# ورود به پوشه فرانت‌اند
cd Front

# نصب وابستگی‌ها
npm install

# اجرای برنامه
npm run dev
```

✅ وب‌سایت روی `http://localhost:3000` در دسترس است

### 4️⃣ ریست کردن داده‌های نمونه (اختیاری)

برای بازگشت به داده‌های اولیه:

```bash
curl http://localhost:6500/truncate
```

---

## 🎯 ویژگی‌های کلیدی

### 🔐 سیستم احراز هویت

- **OTP Authentication**: ورود بدون رمز عبور با کد یکبارمصرف
- **JWT Token Management**: مدیریت امن توکن‌های دسترسی و بازیابی
- **Auto Token Refresh**: تمدید خودکار توکن منقضی‌شده
- **Protected Routes**: حفاظت از صفحات خصوصی با Middleware

### 🔍 جستجو و فیلتر پیشرفته

- فیلتر بر اساس **مبدا** و **مقصد**
- انتخاب **بازه تاریخی** با تقویم شمسی
- جستجوی **لحظه‌ای** بدون Reload
- **مرتب‌سازی** بر اساس قیمت و تاریخ

### 🛒 سبد خرید و رزرو

- افزودن چندین تور به سبد
- **محاسبه خودکار** مجموع قیمت
- **مدیریت تعداد** مسافران
- فرآیند **چک‌اوت** ساده و سریع

### 👤 پنل کاربری جامع

- **مشاهده پروفایل** با امکان ویرایش
- **لیست تورهای رزرو شده** با جزئیات کامل
- **تاریخچه تراکنش‌ها** و پرداخت‌ها
- **وضعیت سفارشات** (در انتظار، تایید شده، کنسل شده)

### 📱 طراحی ریسپانسیو

- **Mobile First Design**
- سازگار با تبلت و دسکتاپ
- **تجربه کاربری یکسان** در تمام دستگاه‌ها
- استفاده از **Modern CSS** و **Flexbox/Grid**

### 🌐 پشتیبانی کامل فارسی

- تمام محتوا به **زبان فارسی**
- تقویم **شمسی** (جلالی)
- **راست‌چین** (RTL) بودن رابط کاربری
- فرمت **قیمت به تومان**

---

## 🛠️ API Endpoints

### 🔑 احراز هویت

| Method | Endpoint | توضیحات | نیاز به توکن |
|--------|----------|---------|--------------|
| `POST` | `/auth/send-otp` | ارسال کد OTP به موبایل | ❌ |
| `POST` | `/auth/check-otp` | تایید کد و دریافت توکن | ❌ |
| `POST` | `/auth/refresh-token` | تمدید توکن منقضی شده | ❌ |

### 🏔️ مدیریت تورها

| Method | Endpoint | توضیحات | نیاز به توکن |
|--------|----------|---------|--------------|
| `GET` | `/tour` | لیست تورها با فیلتر | ❌ |
| `GET` | `/tour/:tourId` | جزئیات یک تور | ❌ |

### 🛒 سبد خرید

| Method | Endpoint | توضیحات | نیاز به توکن |
|--------|----------|---------|--------------|
| `GET` | `/basket` | مشاهده سبد خرید | ✅ |
| `PUT` | `/basket/:tourId` | افزودن تور به سبد | ✅ |
| `DELETE` | `/basket/:tourId` | حذف از سبد | ✅ |

### 📋 سفارشات

| Method | Endpoint | توضیحات | نیاز به توکن |
|--------|----------|---------|--------------|
| `POST` | `/order` | ثبت سفارش جدید | ✅ |
| `GET` | `/order/:orderId` | جزئیات سفارش | ✅ |

### 👤 پروفایل کاربر

| Method | Endpoint | توضیحات | نیاز به توکن |
|--------|----------|---------|--------------|
| `GET` | `/user/profile` | مشاهده پروفایل | ✅ |
| `PUT` | `/user/profile` | ویرایش پروفایل | ✅ |
| `GET` | `/user/tours` | تورهای خریداری شده | ✅ |
| `GET` | `/user/transactions` | تاریخچه تراکنش‌ها | ✅ |

### 🧪 توسعه

| Method | Endpoint | توضیحات | نیاز به توکن |
|--------|----------|---------|--------------|
| `GET` | `/truncate` | ریست داده‌های نمونه | ❌ |

**نکته:** برای endpoint‌های محافظت شده، باید هدر زیر را ارسال کنید:
```
Authorization: Bearer YOUR_JWT_TOKEN
```

---

## 💡 نکات توسعه

### مدیریت توکن در فرانت‌اند

فایل `Front/utils/api.js` شامل Axios instance با Interceptor است که:

- **خودکار** توکن JWT را به هدر درخواست‌ها اضافه می‌کند
- در صورت **انقضای توکن** (خطای 401)، به صورت خودکار Refresh Token را فراخوانی می‌کند
- در صورت شکست، کاربر را به **صفحه ورود** هدایت می‌کند

### ذخیره‌سازی داده

در حال حاضر داده‌ها در فایل‌های JSON ذخیره می‌شوند که برای **توسعه سریع** مناسب است. برای **محیط پروداکشن** توصیه می‌شود:

- مهاجرت به **MongoDB** یا **PostgreSQL**
- استفاده از **Redis** برای کش کردن
- پیاده‌سازی **Backup** خودکار

### امنیت

⚠️ **توجه:** موارد زیر برای پروداکشن باید رعایت شوند:

- ✅ استفاده از **HTTPS**
- ✅ تنظیم **CORS** مناسب
- ✅ رمزگذاری **JWT_SECRET** قوی (حداقل 32 کاراکتر)
- ✅ پیاده‌سازی **Rate Limiting**
- ✅ اعتبارسنجی **Input Validation** کامل
- ✅ استفاده از **Helmet.js** برای امنیت هدرها

---

## 📚 مستندات بیشتر

### مستندات API (Swagger)

بعد از اجرای بک‌اند، مستندات تعاملی Swagger در آدرس زیر در دسترس است:

```
http://localhost:6500/api-docs
```

در این صفحه می‌توانید:
- تمام **endpoint‌ها** را مشاهده کنید
- **پارامترها** و **response**ها را ببینید
- مستقیماً API را **تست** کنید

### نحوه تست API با cURL

**ارسال OTP:**
```bash
curl -X POST http://localhost:6500/auth/send-otp \
  -H "Content-Type: application/json" \
  -d '{"mobile": "09123456789"}'
```

**تایید OTP:**
```bash
curl -X POST http://localhost:6500/auth/check-otp \
  -H "Content-Type: application/json" \
  -d '{"mobile": "09123456789", "code": "1234"}'
```

**دریافت لیست تورها:**
```bash
curl http://localhost:6500/tour
```

---

## 🐛 رفع مشکلات رایج

### مشکل CORS
اگر با خطای CORS مواجه شدید:
- مطمئن شوید بک‌اند روی پورت `6500` در حال اجرا است
- در فایل `Back/app.js` تنظیمات CORS را بررسی کنید

### خطای 401 Unauthorized
- توکن JWT منقضی شده است → Refresh Token خودکار فراخوانی می‌شود
- اگر مشکل ادامه داشت، **خروج و ورود مجدد** انجام دهید

### داده‌ها نمایش داده نمی‌شوند
- مطمئن شوید فایل‌های JSON در پوشه `Back/DB` موجود هستند
- از endpoint `/truncate` برای ریست استفاده کنید

---

## 👨‍💻 توسعه‌دهنده

<div align="center">

**سینا امجدیان**

</div>

---

## 🙏 تشکر ویژه

- **بوتواستارت** - برای فراهم کردن بستر یادگیری
- **منتورها** - برای حمایت و بازخوردی

---

<div align="center">

**⭐ اگر این پروژه برایتان مفید بود، لطفاً یک ستاره بدهید!**

**Made with ❤️ by Sina Amjadian | پروژه پایانی بوتواستارت 2025**

</div>
